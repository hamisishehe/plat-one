<div class="min-h-screen p-4 text-white bg-gradient-to-b from-purple-800 to-indigo-900">
  <!-- MetaXchange Header -->
  <div class="mt-6 text-center">

    <div class="p-4 mt-4 bg-white bg-opacity-10 rounded-xl">
       <img src="cwlogo.png" alt="" srcset="">
    </div>
  </div>

  <!-- Signup Card -->
  <div v-else class="w-11/12 max-w-md p-6 mx-auto mt-8 bg-white shadow-md bg-opacity-10 rounded-2xl">
    <h2 class="text-xl font-semibold text-center">Create Account</h2>

    <div>
      <div
        class="p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400"
        role="alert"
        *ngIf="successmessage"
      >
        <span class="font-medium">Success !</span> {{ successmessage }}
      </div>
      <div
        class="p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400"
        role="alert"
        *ngIf="message"
      >
        <span class="font-medium">Error ! </span> {{ message }}
      </div>
    </div>

    <div class="mt-4">
      <form #registerForm="ngForm" (ngSubmit)="register()">



        <!-- Username Input -->
        <div class="flex items-center p-2 mb-3 bg-indigo-800 rounded-lg bg-opacity-20">
          <span class="text-gray-300">ðŸ‘¤</span>
          <input
            [(ngModel)]="username"
            name="username"
            minlength="3"
            pattern="^[a-zA-Z0-9_]*$"
            #validateusername="ngModel"
            id="username"
            required
            type="text"
            placeholder="User Name"
            class="w-full ml-2 text-black bg-transparent rounded-lg outline-none"
          />

        </div>
        <div
        *ngIf="validateusername.invalid && validateusername.touched"
        class="text-sm text-red-500"
      >
        <small *ngIf="validateusername.errors?.['required']">Username is required.</small>
        <small *ngIf="validateusername.errors?.['minlength']">Username must be at least 3 characters long.</small>
        <small *ngIf="validateusername.errors?.['pattern']">Username cannot contain special characters.</small>
      </div>

        <!-- Email Input -->
        <div class="flex items-center p-2 mt-3 mb-3 bg-indigo-800 rounded-lg bg-opacity-20">
          <span class="text-gray-300">ðŸ“§</span>
          <input
            type="email"
            [(ngModel)]="email"
            name="email"
            required
            #validateemail="ngModel"
            placeholder="Email"
            class="w-full ml-2 text-black bg-transparent rounded-lg outline-none"
          />

        </div>

        <div
            *ngIf="validateemail.invalid && validateemail.touched"
            class="text-sm text-red-500"
          >
            <small *ngIf="validateemail.errors?.['required']">Email is required.</small>
            <small *ngIf="validateemail.errors?.['email']">Please enter a valid email address.</small>
          </div>

      <!-- Country Code + Phone Number Input -->
<div class="flex items-center p-2 mt-3 mb-3 bg-indigo-800 rounded-lg bg-opacity-20">
  <select
    [(ngModel)]="countryCode"
    name="countryCode"
    class="text-black bg-transparent rounded-lg outline-none px-1"
  >
    <option *ngFor="let c of countries" [value]="c.dialCode">
      {{ c.flag }} {{ c.dialCode }}
    </option>
  </select>

  <input
    type="text"
    [(ngModel)]="phonenumber"
    name="phoneNumber"
    required
    #validatephone="ngModel"
    placeholder="Phone Number"
    class="w-full ml-2 text-black bg-transparent rounded-lg outline-none"
  />
</div>

<!-- Error Display -->
<div
  *ngIf="validatephone.invalid && validatephone.touched"
  class="text-sm text-red-500"
>
  <small *ngIf="validatephone.errors?.['required']">Phone number is required.</small>
</div>


      <!-- Password Input -->
<div class="flex items-center p-2 mt-3 mb-3 bg-indigo-800 rounded-lg bg-opacity-20">
  <span class="text-gray-300">ðŸ”’</span>
  <input
    type="password"
    [(ngModel)]="password"
    name="password"
    required
    minlength="6"
    #validatepassword="ngModel"
    placeholder="Password"
    class="w-full ml-2 text-black bg-transparent rounded-lg outline-none"
  />
</div>

<div *ngIf="validatepassword.invalid && validatepassword.touched" class="text-sm text-red-500">
  <small *ngIf="validatepassword.errors?.['required']">Password is required.</small>
  <small *ngIf="validatepassword.errors?.['minlength']">Password must be at least 6 characters long.</small>
</div>

<!-- Confirm Password Input -->
<div class="flex items-center p-2 mt-3 mb-3 bg-indigo-800 rounded-lg bg-opacity-20">
  <span class="text-gray-300">ðŸ”’</span>
  <input
    type="password"
    [(ngModel)]="confirmPassword"
    name="confirmPassword"
    required
    #validateConfirmPassword="ngModel"
    placeholder="Confirm Password"
    class="w-full ml-2 text-black bg-transparent rounded-lg outline-none"
  />
</div>

<div *ngIf="validateConfirmPassword.invalid && validateConfirmPassword.touched" class="text-sm text-red-500">
  <small *ngIf="validateConfirmPassword.errors?.['required']">Confirm Password is required.</small>
</div>

<!-- Password Match Error -->
<div *ngIf="password !== confirmPassword && confirmPassword" class="text-sm text-red-500 bg-white rounded-2xl">
  <small class="text-center">Passwords do not match.</small>
</div>


        <!-- Referral Code Input (Optional) -->
        <div class="flex items-center p-2 mt-3 mb-3 bg-indigo-800 rounded-lg bg-opacity-20">
          <span class="text-gray-300">ðŸ’¼</span>
          <input
            type="text"
            [(ngModel)]="referralCode"
            name="referralCode"
            #validatereferral="ngModel"
            placeholder="Referral Code (Optional)"
            class="w-full ml-2 text-black bg-transparent rounded-lg outline-none"
          />
        </div>

        <!-- Terms and Conditions Checkbox -->
        <div class="flex items-center mb-3 text-sm text-gray-300">
          <input type="checkbox" name="termsAccepted" required  class="mr-2">
          I agree to the <span class="text-white cursor-pointer">Terms and Conditions</span>

        </div>

        <!-- Submit Button -->
        <button
        [disabled]="!registerForm.valid"
        class="bg-blue-600 w-full py-2 rounded-lg mt-4"

      >
      <span *ngIf="loading">
        <svg
          class="inline mr-2 w-4 h-4 text-white animate-spin"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
        >
          <circle
            class="opacity-25"
            cx="12"
            cy="12"
            r="10"
            stroke="currentColor"
            stroke-width="4"
          ></circle>
          <path
            class="opacity-75"
            fill="currentColor"
            d="M4 12a8 8 0 018-8v8z"
          ></path>
        </svg>
        Loading...
      </span>
      <span *ngIf="!loading">Register</span>
      </button>
      </form>

      <div class="mt-4 text-sm text-center text-gray-300">
        Already have an account? <a href="/auth/login"><span class="text-white cursor-pointer">Sign In</span></a>
      </div>
    </div>
  </div>
</div>
